{
	"metadata": {
		"type": "App"
	},
	"project": {
		"shadows": true,
		"vr": false
	},
	"camera": {
		"metadata": {
			"version": 4.5,
			"type": "Object",
			"generator": "Object3D.toJSON"
		},
		"object": {
			"uuid": "34F3674A-85A2-40F1-A648-B0C80F35F4BE",
			"type": "PerspectiveCamera",
			"name": "Camera",
			"layers": 1,
			"matrix": [-0.026941641596474275,0,0.9996370080924811,0,0.18466117601877446,0.9827896421508636,0.00497688178889534,0,-0.9824328974639694,0.18472823087167117,-0.0264779663035557,0,-64.80550084670473,8.27511585964816,-0.37755477479438815,1],
			"fov": 50,
			"zoom": 1,
			"near": 1,
			"far": 10000,
			"focus": 10,
			"aspect": 1.8764705882352941,
			"filmGauge": 35,
			"filmOffset": 0
		}
	},
	"scene": {
		"metadata": {
			"version": 4.5,
			"type": "Object",
			"generator": "Object3D.toJSON"
		},
		"geometries": [
			{
				"uuid": "E66B54AB-27A5-4DBB-B47E-B72AC43B6F73",
				"type": "SphereBufferGeometry",
				"radius": 15,
				"widthSegments": 8,
				"heightSegments": 6,
				"phiStart": 0,
				"phiLength": 6.283185307179586,
				"thetaStart": 0,
				"thetaLength": 3.141592653589793
			},
			{
				"uuid": "318F7F89-4136-40AB-8BC6-9F2443059C2E",
				"type": "CylinderBufferGeometry",
				"radiusTop": 0,
				"radiusBottom": 0.3,
				"height": 5,
				"radialSegments": 12,
				"heightSegments": 1,
				"openEnded": false
			}],
		"materials": [
			{
				"uuid": "C9AADAE6-DA7B-43F5-A3FD-38A10D6A2452",
				"type": "MeshStandardMaterial",
				"color": 16777215,
				"roughness": 0.5,
				"metalness": 0.5,
				"emissive": 16711680,
				"depthFunc": 3,
				"depthTest": true,
				"depthWrite": true,
				"stencilWrite": false,
				"stencilFunc": 519,
				"stencilRef": 0,
				"stencilMask": 255,
				"stencilFail": 7680,
				"stencilZFail": 7680,
				"stencilZPass": 7680,
				"wireframe": true
			},
			{
				"uuid": "8964C9E6-83FC-4B1D-874F-9918D30E8B6C",
				"type": "MeshStandardMaterial",
				"color": 16777215,
				"roughness": 0.5,
				"metalness": 0.5,
				"emissive": 65280,
				"depthFunc": 3,
				"depthTest": true,
				"depthWrite": true,
				"stencilWrite": false,
				"stencilFunc": 519,
				"stencilRef": 0,
				"stencilMask": 255,
				"stencilFail": 7680,
				"stencilZFail": 7680,
				"stencilZPass": 7680
			}],
		"object": {
			"uuid": "35FE846C-9400-4098-8839-441011ED2200",
			"type": "Scene",
			"name": "Scene",
			"layers": 1,
			"matrix": [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],
			"children": [
				{
					"uuid": "075D8614-98F0-4F64-AAD3-92E574E7913B",
					"type": "Group",
					"name": "Panel",
					"visible": false,
					"layers": 1,
					"matrix": [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]
				},
				{
					"uuid": "91CC5BF6-87DB-45A6-8620-63138E9EA4F2",
					"type": "Group",
					"name": "Ground",
					"layers": 1,
					"matrix": [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]
				},
				{
					"uuid": "555495BC-8EC7-4CBB-982B-F8AB597C8A3C",
					"type": "Group",
					"name": "Materials",
					"visible": false,
					"layers": 1,
					"matrix": [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]
				},
				{
					"uuid": "DC362FB5-6BEB-4502-8180-18D699A1DB18",
					"type": "Mesh",
					"name": "PlayerSphere",
					"layers": 1,
					"matrix": [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],
					"geometry": "E66B54AB-27A5-4DBB-B47E-B72AC43B6F73",
					"material": "C9AADAE6-DA7B-43F5-A3FD-38A10D6A2452"
				},
				{
					"uuid": "098E3671-3453-4C87-A884-A9A2F353E3DF",
					"type": "Mesh",
					"name": "DirectionPointer",
					"visible": false,
					"layers": 1,
					"matrix": [1,0,0,0,0,2.220446049250313e-16,1,0,0,-1,2.220446049250313e-16,0,0,15,0,1],
					"geometry": "318F7F89-4136-40AB-8BC6-9F2443059C2E",
					"material": "8964C9E6-83FC-4B1D-874F-9918D30E8B6C"
				},
				{
					"uuid": "44B6BFAC-8C9E-48F6-8BA9-78DC576BDA86",
					"type": "Group",
					"name": "LocalPlayer",
					"layers": 1,
					"matrix": [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]
				}],
			"background": 4194368
		}
	},
	"scripts": {
		"555495BC-8EC7-4CBB-982B-F8AB597C8A3C": [
			{
				"name": "matcaps",
				"source": "var material;\nvar textures = {};\n\nvar matcaps = \"MZV8PzS,L509oY2,Bw7q38p,2FA0yx1,vVDGl7g,3nmnKd4,E36SPOB,MXqauTz,YHsPLdq,soRJv4a,\" // 2k (large)\n\t\t\t+ \"bixnsMm,MS1GDja,pUytALG,4KwC8wH,Wiqsp9s,gXRFY3U,2tkhy7C,D64zaTR,Id8k2u4,Fx9154f,\"\n\t\t\t+ \"dqKYFPo,l0Lf1LN,7bH7Ajw,IeAwKEi,VysdwUU,dWAhf12,9ufYr2S,iAWd8i1,mkGDAn5,gf3PsvD,\"\n\t\t\t+ \"BeHwxKA,GYBQ8Xr,9gxylAS,0p2RT39,aHeUCko,epbmrGs,NKMFDGB,pvXMCj9,QbZ8H2v,aCAVXQb,\"\n\t\t\t+ \"qU0AEUM,yvwt1wj,D5UeFcC,6GZMeko,rSlm3oM,Xqg7n0A,PzHZLHy,MEzwCJq,wgf7Vl0,GcLQiey,\"\n\t\t\t+ \"3xH34nj,vhdhgMe,jRTIv3l,xELCxlQ,wtJaViy,Qb0qKtc,7kq8wQ3,F6kcile,0LRxFql,rxUXS8C,\"\n\t\t\t+ \"qXg0NKn,LSB7hqR,EolEkFt,gOtyiMy,YTE0R32,thsIYPF,ee6stBn,gyYhQao,QOEE3jO,0V4rQPV,\"\n\t\t\t+ \"l9Tugo0,R86xHzg,IDlk0H9,tUparH7,GISkhjO,JQzRceW,Jl6XqD0,4tyRlwP,aFIJ3Iu,BCqRnS4,\"\n\t\t\t+ \"1OcGlAa,PqIxyYE,S7J95Cf,QPUvzXD,Stdy1eT,k0nOt5N,rWuDYYe,SGRUmyD,1Ia4Qbk,FFYLtQa,\"\n\t\t\t+ \"szmc38X,NJSPJlS,8HsVNJA,n3wbE5E,88autaS,7jwTUiI,H1F3Yrv,kgV7aSY,PDFIrWw,Uun8Lpr,\"\n\t\t\t+ \"Oz16d2L,02gRNwL,bV94g46,eUEtBHC,e1N7JYN,bWpofvm,uzlo3mR,YaXveL2,mw2f1lF,HkWGQb1,\"\n\t\t\t+ \"N9xoehs,53rWmmo,sBPySdS,1YZKblR,ywKHb7r,3UcbBN7,pWPtSJS,n1a2nB8,lecZa2Q,e3bxY9I\";\n// WxVSuFW: normal matcap.\nmatcaps = matcaps.split(\",\"); \n\ntextures.dispose = function(){\n\tfor (var uuid in this ) {\n\t\tthis[ uuid ].dispose();\n\t}\n}\n\n//\tTODO: to cache matcaps and icons.\n\nvar container = document.createElement(\"div\");\ncontainer.id = \"matcap-list\";\ncontainer.style.width = \"300px\";\nvar title = document.createElement(\"h3\");\ntitle.textContent = \"Materials\";\ncontainer.appendChild( title );\n\nwhile ( matcaps.length ) {\n\t(function( id ){\n\n\t\tvar button = document.createElement(\"div\");\n\t\tbutton.id = id;\n\t\tbutton.classList.add(\"btn\", \"btn-white-outline\", \"btn-matcap\");\n\t//\tTODO: to cache matcap icons.\n\t\tbutton.style.cssText = \"width:33px;height:33px;padding:0;display:inline-block;\"\n\t\t+ \"float:left;margin-right:4px;margin-bottom:4px;border:1px solid;border-radius:4px;\"\n\t\t+ \"background-size:contain;background-image:url(https://i.imgur.com/\"+id+\"s.jpg);\"; \n\t//\n\t\tvar url = \"https://i.imgur.com/\"+id+\".jpg\";\n\t\tvar loader = new THREE.TextureLoader();\n\t\tloader.crossOrigin = \"anonymous\";\n\t\tloader.load( url, function( texture ){\n\t\t\ttextures[ texture.uuid ] = texture;\n\t\t\tbutton.setAttribute(\"uuid\", texture.uuid);\n\t\t\tcontainer.appendChild( button );\n\t\t});\n\t//\n\t\tbutton.addEventListener( \"click\", function(){\n\t\t\tvar uuid = button.getAttribute(\"uuid\");\n\t\t\tdebugMode && console.log( textures[ uuid ] );\n\t\t\tif ( !material ) return;\n\t\t//\tExecute command.\n\t\t\tmaterial.envMap = textures[ uuid ];\n\t\t\tmaterial.envMap.needsUpdate = true;\n\t\t\tmaterial.needsUpdate = true;\n\t\t\ttextures.dispose();\n\t\t});\n\t//\n\n\t})( matcaps.shift() );\n}\n\nconsole.log( textures );\n\nsetTimeout( function(){\n\tdocument.getElementById(\"side-panel-content\").appendChild( container );\n});\n\n"
			}],
		"075D8614-98F0-4F64-AAD3-92E574E7913B": [
			{
				"name": "side-panel.js",
				"source": "var sidePanel = document.createElement(\"div\");\nsidePanel.id = \"side-panel\";\nsidePanel.classList.add(\"side-panel\");\nsidePanel.style.cssText = \"position:absolute;top:0;right:0;bottom:0;width:370px;color:#eee;background:rgba(0,0,0,0.4);\"\n\t+ \" -webkit-transform:translateX( 340px ); -webkit-transition:-webkit-transform 500ms ease-out; z-index:9999;\";\n\nvar container = document.createElement(\"div\");\ncontainer.id = \"side-panel-content\";\ncontainer.style.cssText = \"position:absolute;top:40px;left:40px;bottom:20px;right:20px;overflow-x:hidden;\";\n\nvar sidePillBar = document.createElement(\"div\");\nsidePillBar.id = \"side-pill-bar\";\nsidePillBar.classList.add(\"side-holder\");\nsidePillBar.style.cssText = \"margin-bottom:20px;\";\ncontainer.appendChild( sidePillBar );\n\nsideTabPills = document.createElement(\"ul\");\nsideTabPills.id = \"side-tab-pills\";\nsideTabPills.classList.add(\"nav\",\"nav-tabs\",\"nav-pills\");\nsideTabPills.style.cssText = \"display:inline-flex!important;overflow-y:hidden;width:300px;scroll-behavior:smooth;\";\nsidePillBar.appendChild( sideTabPills );\n\nsideTabPanel = document.createElement(\"div\");\nsideTabPanel.id = \"side-tab-panel\";\nsideTabPanel.classList.add(\"tab-content\");\ncontainer.appendChild( sideTabPanel );\n\nsidePanel.addEventListener( \"mouseenter\", function(){\n\tthis.classList.toggle( \"pinned\", true );\n\tthis.style[\"-webkit-transform\"] = \"translateX( 0 )\";\n});\n\nsidePanel.addEventListener( \"mouseleave\", function(){\n\tthis.classList.toggle( \"pinned\", false );\n\tthis.style[\"-webkit-transform\"] = \"translateX( 340px )\";\n});\n\nsidePanel.appendChild( container );\nplayer.dom.appendChild( sidePanel );\n\nfunction stop(){\n\tsidePanel.remove();\n}\n\nscene.remove( this );"
			}],
		"91CC5BF6-87DB-45A6-8620-63138E9EA4F2": [
			{
				"name": "octree.js",
				"source": "//\toctree.js\n\nvar partition = 1;\n\nvar min = new THREE.Vector3( -1000, -1000, -1000 );\nvar max = new THREE.Vector3(  1000,  1000,  1000 );\n\noctree = new MW.Octree( min, max, partition );\n\n//\tHELPERS.\n\nvar octMeshHelpers = [];\nvar octEdgeHelpers = [];\n\nfunction octreeHelpers( octree ){\n\tvar nodeIndex = octree.nodes.length - 1;\n\tvar node = octree.nodes[ nodeIndex ][0];\n\tvar x = node.max.x - node.min.x;\n\tvar y = node.max.y - node.min.y;\n\tvar z = node.max.z - node.min.z;\n\tvar geometry = new THREE.BoxGeometry(x, y, z);\n\tvar material = new THREE.MeshBasicMaterial({visible:false});\n\n\toctree.nodes[ nodeIndex ].forEach(function(node){\n\n\t\tvar x = node.max.x - node.min.x;\n\t\tvar y = node.max.y - node.min.y;\n\t\tvar z = node.max.z - node.min.z;\n\n\t\tvar mesh = new THREE.Mesh(geometry, material);\n\t\tvar helper = new THREE.EdgesHelper( mesh, 0xffff00 );\n\n\t\tmesh.position.set(\n\t\t\tnode.min.x + (x/2),\n\t\t\tnode.min.y + (y/2),\n\t\t\tnode.min.z + (z/2)\n\t\t);\n\n\t\t//  scene.add( mesh );\n\t\tscene.add( mesh, helper );\n\n\t\toctMeshHelpers.push(mesh);\n\t\toctEdgesHelpers.push(helper);\n\t});\n}\n\nfunction octreeNodeHelper( node ){\n\tvar x = node.max.x - node.min.x;\n\tvar y = node.max.y - node.min.y;\n\tvar z = node.max.z - node.min.z;\n\tvar geometry = new THREE.BoxGeometry(x, y, z);\n\tvar material = new THREE.MeshBasicMaterial({visible:false});\n\tvar mesh = new THREE.Mesh(geometry, material);\n\tmesh.position.set(\n\t\tnode.min.x + (x/2),\n\t\tnode.min.y + (y/2),\n\t\tnode.min.z + (z/2)\n\t);\n\tscene.add( mesh );\n\toctMeshHelpers.push(mesh);\n\tvar helper = new THREE.EdgesHelper( mesh, 0xffff00 );\n\thelper.name = \"octree helper\";\n\tscene.add( helper );\n\toctEdgesHelpers.push(helper);\n}\n\n//  Remove octree mesh helpers.\n\nfunction removeOctreeHelpers(){\n\toctMeshHelpers.forEach( function( item, i ){\n\t\tscene.remove( octMeshHelpers[i] );\n\t\tvar geometry = octMeshHelpers[i].geometry;\n\t\tvar material = octMeshHelpers[i].material;\n\t\tgeometry.dispose();\n\t\tmaterial.dispose();\n\t});\n\tconsole.log( \"octree mesh helpers has been removed.\" );\n}\n"
			},
			{
				"name": "world.js",
				"source": "//\tWORLD.\n\nworld = new MW.World();\nworld.add( octree );\n\n\n//\tUPDATE.\n\nvar clock = new THREE.Clock(); // important!\n\nfunction update(){\n\n\tvar delta = clock.getDelta();\n\n\tworld.step( delta );\n\n}\n"
			},
			{
				"name": "ground.js",
				"source": "//\tground.js\n\nvar ground = new THREE.Mesh(\n\tnew THREE.PlaneGeometry( 10000, 10000, 1, 1 ),\n\tnew THREE.MeshLambertMaterial({ \n\t\topacity:1, \n\t\tcolor:0x829ec4,\n\t})\n);\n\n//\tWe need only the geometry of the ground\n//\tso there is not need to add to the scene.\n\nground.rotation.x = -Math.PI / 2; // THREE.Math.degToRad( -90 );\noctree.importThreeMesh( ground ); // important!\n"
			},
			{
				"name": "ground-helper.js",
				"source": "this.add( new THREE.GridHelper( 1000, 100, 0x444444, 0x444444 ) );\n"
			}],
		"44B6BFAC-8C9E-48F6-8BA9-78DC576BDA86": [
			{
				"name": "AW3D.js",
				"source": "AW3D = { VERSION: \"0.4.6\" };\n\n//  Player Holder.\n\nAW3D.PlayerHolder = function ( name ){\n\tvar holder = new THREE.Object3D();\n\tholder.position.set( 0, 1, 0 );\n\tholder.name = name || \"PLAYER HOLDER\";\n\treturn holder;\n};\n\n//  Player Holder Helper.\n\nAW3D.PlayerHolderHelper = function ( name ){\n\tvar helper = new THREE.BoxHelper();\n\thelper.name = name || \"HOLDER HELPER\";\n\thelper.visible = true;\n\treturn helper;\n};\n"
			},
			{
				"name": "OutfitManager.js",
				"source": "//\tconstructor.\n\nOutfitManager = function(){\n\n\tvar self = this;\n\n\tvar Signal = signals.Signal;\n\tthis.added = new Signal();\n\tthis.loaded = new Signal();\n\tthis.removed = new Signal();\n\tthis.changed = new Signal();\n\tthis.genderChanged = new Signal();\n\tthis.genderIsChanging = new Signal();\n\n\tthis.eventTimeout = undefined;\n\n//\tfbx must load before localPlayer.outfit.\n//\tthis.direction = fbx; // important!\n\tthis.direction = new THREE.Object3D();\n\n\tthis.gender = {\n\t\tmale    : false,\n\t\tfemale  : false,\n\t\tshemale : false,\n\t\ttrans   : false,\n\t};\n\n\tthis.genitals = { \n\t\tvagina   : false,\n\t\tpenis    : false,\n\t\tattached : false,\n\t};\n\n\tthis.layers = [\n\t\t\"body\", \"head\",\n\t\t\"face\", \"hairs\", \"upper\",\n\t\t\"lower\", \"torso\", \"arms\",\n\t\t\"legs\", \"hands\", \"feet\",\n\t\t\"genitals\", \"skeleton\",\n\t];\n\n\tthis.slots = [\n\t\t\"skeleton\", \"body\", \"hairs\",\n\t\t\"eyes\", \"glasses\", \"hat\",\n\t\t\"bra\", \"panties\", \"stockings\",\n\t\t\"underwears\", \"costume\",\n\t\t\"tshirt\", \"skirt\", \"trousers\",\n\t\t\"skirt\", \"dress\", \"shoes\",\n\t\t\"coat\", \"penis\", \"vagina\",\n\t];\n\n\tthis.stickers = [\n\t\t\"skin\", \"makeup\", \"tattoo\", \"bodypaint\",\n\t\t\"neck\", \"chest\", \"belly\", \"upperlimb\",\n\t\t\"arm\", \"forearm\", \"wrist\", \"hand\",\n\t\t\"lowerlimb\", \"thigh\", \"leg\", \"foot\",\n\t\t\"butt\", \"back\", \"scapula\", \"lumbar\",\n\t];\n\n\tthis.attachments = [\n\t\t\"helmet\", \"face\", \"mask\", \"teeth\",\n\t\t\"beard\", \"eyelash\", \"glasses\", \"ears\",\n\t\t\"belly\", \"gun\", \"wepon\", \"knife\", \"sword\",\n\t\t\"bistol\", \"watch\", \"jewelry\", \"earings\",\n\t\t\"necklace\", \"bracelet\", \"bag\", \"handbag\",\n\t\t\"cape\", \"coat\", \"horn\", \"tail\", \"penis\", \n\t];\n\n//  Outfit EventDispatcher.\n\tObject.assign( this, THREE.EventDispatcher.prototype );  // important!\n\n};\n\nOutfitManager.prototype = {\n\n\tconstructor: AW3D.OutfitManager,\n\n};\n"
			},
			{
				"name": "LocalPlayer.js",
				"source": "var r = 15;\nlocalPlayer = new LocalPlayer( r );\n\n//\tconstructor.\n\nfunction LocalPlayer( radius ){\n\n\tvar scope = this;\n\n//  Player Holder.\n\n\tthis.holder = AW3D.PlayerHolder();\n\tthis.holder.visible = true;\n\tscene.add( this.holder );\n\n//  Player Sphere.\n\n\tthis.sphere = AW3D.PlayerSphere;\n\tthis.sphere.position.y = 0;\n\tthis.holder.add( this.sphere );\n\n//  Outfit Manager.\n\n\tthis.outfit = new OutfitManager(); // important!\n\n\tthis.outfit.update = function() {\n\n\t//  Update avatar rotation y.\n\t\tvar direction = scope.controller.direction - Math.PI;\n\n\t//  \"this\" is the \"localPlayer.outfit\".\n\t\tthis.direction.rotation.y = direction;\n\n\t//  Update avatar position.\n\t\tvar x = scope.controller.center.x;\n\t\tvar y = scope.controller.center.y - scope.controller.radius;\n\t\tvar z = scope.controller.center.z;\n\n\t//  \"this\" is the \"localPlayer.outfit\".\n\t\tthis.direction.position.set( x, y, z );\n\n\t};\n\n\t\n//  Player Controller.\n\n\tvar radius = parseInt( radius ); // important!\n\tif ( isNaN( radius ) || radius < 1 ) radius = 1;\n\n\tthis.controller = new MW.CharacterController( this.holder, radius );\n\tthis.controller.isWalking = false;\n\n\tthis.controller.getdata = function( action ){\n\n\t\tvar data = {};\n\t\tdata.playerid = socket.id;\n\t\tdata.radius = this.radius;\n\t\tdata.isGrounded = this.isGrounded;\n\t\tdata.isOnSlope = this.isOnSlope;\n\t\tdata.isIdling  = this.isIdling;\n\t\tdata.isJumping = this.isJumping;\n\t\tdata.isRunning = this.isRunning;\n\t\tdata.isWalking = this.isWalking;\n\t\tdata.direction = this.direction;\n\t\tdata.movementSpeed = this.movementSpeed;\n\t\tdata.jumpStartTime = this.jumpStartTime;\n\t\tdata.position = this.center.toArray();\n\t\tif (!!action) data.action = action;\n\n\t\treturn data;\n\t};\n\n\tfunction onStartJumping(){\n\t\tmixer.stopAllAction(); // scope.outfit.AnimationsHandler.weightOff(\"idle\", \"walk\", \"run\");\n\t\tStandingJump.play();\n\t};\n\n\tfunction onEndJumping(){\n\t//\tscope.outfit.AnimationsHandler.weightOn(\"idle\", \"walk\", \"run\");\n\n\t\tif ( scope.controller.isRunning && scope.controller.isWalking ) {\n\n\t\t\tmixer.stopAllAction(); // scope.outfit.AnimationsHandler.stop();\n\t\t\tscope.controller.movementSpeed = 28;\n\t\t\n\t\t\tWalk.play(); // scope.outfit.AnimationsHandler.play(\"walk\");\n\t\t\tscope.controller.dispatchEvent({type:\"startRunning\"});\n\n\t\t} else if ( scope.controller.isRunning && !scope.controller.isWalking ) {\n\n\t\t\tmixer.stopAllAction(); // scope.outfit.AnimationsHandler.stop();\n\t\t\tscope.controller.movementSpeed = 45;\n\t\t\tJogging.play(); // scope.outfit.AnimationsHandler.play(\"run\");\n\t\t\tscope.controller.dispatchEvent({type:\"startRunning\"});\n\n\t\t} else {\n\n\t\t\tmixer.stopAllAction(); // scope.outfit.AnimationsHandler.stop();\n\t\t\tscope.controller.movementSpeed = 0;\n\t\t\tStandingIdle.play(); // scope.outfit.AnimationsHandler.play(\"idle\");\n\t\t\tscope.controller.dispatchEvent({type:\"startIdling\"});\n\n\t\t}\n\t}\n\n\tthis.controller.addEventListener(\"endJumping\",   onEndJumping);\n\tthis.controller.addEventListener(\"startJumping\", onStartJumping);\n\n//  Add controller to world.\n\n\tworld.add( this.controller ); // important!\n\n\tdebugMode && console.log( \n\t\t\"characterPool length:\", world.characterPool.length, \n\t\t\"index:\", world.characterPool.indexOf( this.controller )\n\t);\n\n//  Add outfit direction holder to scene.\n\n\tscene.add( this.outfit.direction ); // important!\n\n}\n\nLocalPlayer.prototype = {\n\n//  Collect position, direction, nickname, and gender.\n\n\tgetdata: function( socket ){\n\n\t\tif ( !socket ) return;\n\t\tvar data = {};\n\t\tdata.playerid  = socket.id;\n\t\tdata.nickname  = this.nickname;\n\t\tdata.gender    = this.outfit.getGender();\n\t\tdata.direction = this.outfit.direction.rotation.y;\n\t\tdata.position  = this.outfit.direction.position.toArray();\n\t\tdata.dna       = this.outfit.toDNA();\n\t\tdebugMode && console.log(\"player data:\", data);\n\n\t\treturn data;\n\n\t},\n\n//  Remote player set data.\n\n\tsetdata: function( data ){\n\n\t\tif ( !data.playerid || data.playerid != this.playerid ) return;\n\n\t\tthis.playerid = data.playerid;\n\t\tthis.nickname = data.nickname;\n\t\tthis.outfit.setGender( data.gender );\n\t\tthis.outfit.direction.rotation.y = data.direction;\n\t\tthis.outfit.direction.position.fromArray(data.position);\n\n\t\tif (data.action != undefined) {\n\t\t\tmixer.stopAllAction(); // this.outfit.AnimationsHandler.stop();\n\t\t\tdata.action.play(); // this.outfit.AnimationsHandler.play( data.action );\n\t\t}\n\n\t},\n\n};\n"
			},
			{
				"name": "CameraControls.js",
				"source": "//\tCamera controls.js\n\ncameraControls = new MW.TPSCameraControl(camera, localPlayer.holder, {\n\tel: renderer.domElement, // html renderer element.\n\toffset: new THREE.Vector3( 0, 12, 0 ), // camera eye height.\n\tradius: 40, // default: 37 // (distance of the character to the camera).\n\tminRadius: 6, // default: 10 // (can take and negative values, yes!!!).\n\tmaxRadius: 100, // default: 64, runtime: 40.\n\trigidObjects: [], // collition objects for the camera.\n});\n\ncameraControls.getforward = function(){ \n\treturn -cameraControls.theta \n};\n\ncameraControls.setVerticalOffset = function(offset){ \n\tcameraControls.offset.y = offset; \n};\n\ncameraControls.frontAngleUpdate = function(){\n\tcameraControls.forward = -cameraControls.theta;\n};\n\n//\tUPDATE.\n\nfunction update(){\n\n\tcameraControls.update();\n\tcameraControls.frontAngleUpdate();\n\n}\n"
			},
			{
				"name": "keyInputControls.js",
				"source": "//\tkeyInputControls.js\n\nkeyInputControls = new MW.KeyInputControl();\n\nkeyInputControls.On = function(){\n\tif ( !keyInputControls.isOff ) return;\n\tkeyInputControls.addEventListener( \"movekeyon\", onMoveKeyOn );\n\tkeyInputControls.addEventListener( \"movekeyoff\", onMoveKeyOff );\n\tkeyInputControls.addEventListener( \"jumpkeypress\", onJumpInput );\n\tkeyInputControls.addEventListener( \"movekeychange\", onMoveKeyChange );\n\tkeyInputControls.isOff = false;\n\tdebugMode && console.log( \"keyInputControls are ON.\" );\n};\n\nkeyInputControls.Off = function(){\n\tif ( keyInputControls.isOff ) return;\n\tkeyInputControls.removeEventListener( \"movekeyon\", onMoveKeyOn );\n\tkeyInputControls.removeEventListener( \"movekeyoff\", onMoveKeyOff );\n\tkeyInputControls.removeEventListener( \"jumpkeypress\", onJumpInput );\n\tkeyInputControls.removeEventListener( \"movekeychange\", onMoveKeyChange );\n\tkeyInputControls.isOff = true;\n\tdebugMode && console.log( \"keyInputControls are OFF.\" );\n};\n\nkeyInputControls.update = function(){\n\tif ( keyInputControls.isOff ) return;\n\tif ( keyInputControls.isMoveKeyHolded \n\t\t|| localPlayer.controller.isJumping \n\t\t|| !localPlayer.controller.isGrounded \n\t\t|| localPlayer.controller.isOnSlope ){\n\t\tthis.dispatchEvent({type:\"update\"});\n\t}\n};\n\nsetTimeout(function(){\n\tkeyInputControls.Off(); // important!\n\tkeyInputControls.inRun = false;\n});\n\nsetTimeout(function(){\n\tkeyInputControls.On(); // important!\n});\n\nfunction onMoveKeyOn() { \n\n\tif (  localPlayer.controller.isJumping \n\t\t|| !localPlayer.controller.isGrounded \n\t\t||  localPlayer.controller.isOnSlope ) {\n\t\treturn;\n\t}\n\n\tlocalPlayer.controller.direction = (2 * Math.PI) - cameraControls.getFrontAngle() + this.frontAngle;\n\n\tmixer.stopAllAction(); // localPlayer.outfit.AnimationsHandler.stop();\n\tlocalPlayer.controller.isRunning = true; \n\tlocalPlayer.controller.isWalking = true;\n\tlocalPlayer.controller.movementSpeed = 28;\n\tWalking.play(); // localPlayer.outfit.AnimationsHandler.play(\"walk\");\n}\n\nfunction onMoveKeyChange() {\n\tlocalPlayer.controller.direction = (2 * Math.PI) - cameraControls.getFrontAngle() + this.frontAngle;\n}\n\nfunction onMoveKeyOff() {\n\n\tif (  localPlayer.controller.isJumping \n\t\t|| !localPlayer.controller.isGrounded \n\t\t||  localPlayer.controller.isOnSlope ) {\n\t\treturn;\n\t}\n\n\tvar finalDirection = (2 * Math.PI) - cameraControls.getFrontAngle() + this.frontAngle;\n\n\tlocalPlayer.controller.direction = finalDirection;\n\tmixer.stopAllAction(); // localPlayer.outfit.AnimationsHandler.stop();\n\tlocalPlayer.controller.isRunning = false;\n\tlocalPlayer.controller.isWalking = false;\n\tlocalPlayer.controller.isIdling  = true;\n\tlocalPlayer.controller.movementSpeed = 0;\n\tStandingIdle.play(); // localPlayer.outfit.AnimationsHandler.play(\"idle\");\n\tlocalPlayer.controller.dispatchEvent({type:\"startIdling\"});\n}\n\nfunction onJumpInput() {\n\n\tif (  localPlayer.controller.isJumping \n\t\t|| !localPlayer.controller.isGrounded \n\t\t||  localPlayer.controller.isOnSlope ) {\n\t\treturn;\n\t}\n\n\tlocalPlayer.controller.jump();\n\tJump2.play(); // localPlayer.outfit.AnimationsHandler.jump();\n}\n\nfunction update(){\n\n\tkeyInputControls.update();\n\n}"
			},
			{
				"name": "joystickControls.js",
				"source": "//\tjoystickControls.js\n\nvar joysticControls1 = document.createElement( \"div\" );\njoysticControls1.id = \"joystick-controls-1\";\njoysticControls1.classList.add(\"joystick-controls\");\n\nvar joysticControls2 = document.createElement( \"div\" );\njoysticControls2.id = \"joystick-controls-2\";\njoysticControls2.classList.add(\"joystick-controls\");\n\nrenderer.domElement.parentElement.append( joysticControls1 );\nrenderer.domElement.parentElement.append( joysticControls2 );\n\nsetTimeout(function(){\n\n\tvar joystick1Selector  = \"#joystick1\";\n\tvar joystick2Selector  = \"#joystick2\";\n\tvar jumpButtonSelector = \"#jumpButton\";\n\n\tvar joystickControlsSelector  = \".joystick-controls\";\n\tvar joystickControls1Selector = \"#joystick-controls-1\";\n\tvar joystickControls2Selector = \"#joystick-controls-2\";\n\n\t//\tvar buttonSvgSrc = \"<svg width=\\\"48\\\" height=\\\"48\\\" viewBox=\\\"0 0 64 64\\\"><path fill=\\\"#fff\\\" d=\\\"M44.5,54.5c-0.3-5.1-2.4-9.4-5.7-13.2C41,36,40.9,30,38.5,24.7c-1.2-2.7-3.9-4.4-6.9-3.3c-0.2,0.1-0.4,0.1-0.5,0.2c-3-4.3-6.6-8.3-10.1-11.8c-2.6-2.6-6.4,1.7-3.8,4.3c3.9,3.9,8.1,8.5,11,13.7c0,0.1,0.1,0.3,0.2,0.4c1.5,3.2,1.9,6.4,0.2,9.6c-0.3,0.5-0.4,1-0.5,1.5c-1.1,1.5-2.3,3-3.6,4.4c-0.8-2.3-1.4-4.7-1.6-7.1c-0.5-4.6-7.7-4.1-7.2,0.5c0.5,4.9,2.1,9.6,3.9,14.2c0.8,1.9,3.6,3.4,5.4,1.8c2.8-2.4,5.3-4.9,7.5-7.8c0.2,0.1,0.5,0.1,0.7,0.1c0.1,0.3,0.3,0.5,0.5,0.7c1.7,1.8,2.8,3.9,3.3,6.3c-2.2,0.8-4.6,1.4-7,1.4c-4.6,0.1-4.1,7.2,0.5,7.2c4-0.1,7.9-1.3,11.6-3C43.6,57.5,44.6,56.2,44.5,54.5z M34.2,8.9c0.7,0.1,1.6-0.1,2.3,0.3c1.5,0.8,2.6,2.1,3.2,3.6c0.2-2.2,0.5-4.3,0.8-6.5c0.5-3.7-5.1-4.7-5.7-1.1C34.6,6.3,34.3,7.8,34.2,8.9z\\\"/><circle fill=\\\"#fff\\\" cx=\\\"33.8\\\" cy=\\\"15.2\\\" r=\\\"4.9\\\"/></svg>\";\n\n\tjoystick1  = new virtualInput.Joystick( $( joystickControls1Selector ), 94, { id: \"joystick1\" } ); // VirtualInput constructor uses jQuery objects.\n\tjoystick2  = new virtualInput.Joystick( $( joystickControls2Selector ), 94, { id: \"joystick2\" } ); // VirtualInput constructor uses jQuery objects.\n\tjumpButton = new virtualInput.Button(   $( joystickControls1Selector ), 58, { id: \"jumpButton\", label: \"<b>JUMP</b>\" } ); // label:buttonSvgSrc.\n\n\tjoystick1.addEventListener( \"active\", function onActive() { \n\n\t\tif (  localPlayer.controller.isJumping \n\t\t\t|| !localPlayer.controller.isGrounded \n\t\t\t|| localPlayer.controller.isOnSlope ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlocalPlayer.controller.direction = (3 * Math.PI/2) - cameraControls.getFrontAngle() + this.angle; // important!\n\n\t\tif ( localPlayer.controller.isRunning && !localPlayer.controller.isWalking ) {\n\n\t\t\tmixer.stopAllAction(); // localPlayer.outfit.AnimationsHandler.stop();\n\t\t\tlocalPlayer.controller.movementSpeed = 45;\n\t\t\tJogging.play(); //\tlocalPlayer.outfit.AnimationsHandler.play(\"run\");\n\n\t\t} else {\n\n\t\t\tmixer.stopAllAction(); // localPlayer.outfit.AnimationsHandler.stop();\n\t\t\tlocalPlayer.controller.isRunning = true; \n\t\t\tlocalPlayer.controller.isWalking = false;  // !!!danger: \"false\" cause bug in production server ??? //\n\t\t\tlocalPlayer.controller.movementSpeed = 28;\n\t\t\tWalking.play(); // localPlayer.outfit.AnimationsHandler.play(\"walk\");\n\t\t}\n\n\t});\n\n\tjoystick1.addEventListener( \"disactive\", function onDisactive() { \n\n\t\tif (  localPlayer.controller.isJumping \n\t\t\t|| !localPlayer.controller.isGrounded \n\t\t\t||  localPlayer.controller.isOnSlope ) {\n\t\t\treturn;\n\t\t}\n\n\t\tmixer.stopAllAction(); // localPlayer.outfit.AnimationsHandler.stop();\n\t\tlocalPlayer.controller.isRunning = false;\n\t\tlocalPlayer.controller.isWalking = false;\n\t\tlocalPlayer.controller.movementSpeed = 0;\n\t\tStandingIdle.play(); // localPlayer.outfit.AnimationsHandler.play(\"idle\");\n\t\tlocalPlayer.controller.dispatchEvent({type:\"startIdling\"});\n\t});\n\n\tjoystick1.update = function(){\n\n\t\tif ( this.isActive ) {\n\n\t\t\tlocalPlayer.controller.direction = (3 * Math.PI/2) - cameraControls.getFrontAngle() + this.angle;\n\n\t\t\tthis.dispatchEvent({type:\"update\"}); // important!\n\n\t\t}\n\t};\n\n\tjoystick2.update = function(){\n\n\t\tif ( this.isActive ) {\n\n\t\t\tcameraControls.setLatLon(\n\t\t\t\tcameraControls.lat + this.position.y * 0.5, // deg.\n\t\t\t\tcameraControls.lon - this.position.x        // deg.\n\t\t\t);\n\n\t\t\tthis.dispatchEvent({type:\"update\"}); // important!\n\t\t}\n\t}\n\n\tjumpButton.addEventListener( \"press\", function onPress() { \n\n\t\tif (  localPlayer.controller.isJumping \n\t\t\t|| !localPlayer.controller.isGrounded \n\t\t\t|| localPlayer.controller.isOnSlope ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlocalPlayer.controller.jump();\n\t\tJump2.play(); // localPlayer.outfit.AnimationsHandler.jump();\n\t});\n\n});\n\nfunction update(){\n\n\tjoystick1.update();\n\tjoystick2.update();\n\n}\n\nfunction stop(){\n\n\tjoysticControls1.remove();\n\tjoysticControls2.remove();\n\n}\n"
			},
			{
				"name": "",
				"source": ""
			}],
		"098E3671-3453-4C87-A884-A9A2F353E3DF": [
			{
				"name": "DirectionPointer",
				"source": "AW3D.DirectionPointer = this;\n"
			}],
		"DC362FB5-6BEB-4502-8180-18D699A1DB18": [
			{
				"name": "PlayerSphere",
				"source": "AW3D.PlayerSphere = this;"
			}]
	}
}